
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suggestion</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
      body {
    font-family: 'Montserrat', Arial, sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    background-color: black;
    color: white;
}

header {
    background-color: green;
    color: white;
    padding: 1rem;
    text-align: center;
}

main {
    padding: 1rem;
}

section {
    margin-bottom: 2rem;
    background-color: black;
    border: 1px solid green;
    padding: 1rem;
    border-radius: 5px;
    max-width: 600px;
    margin: 0 auto;
}

h2 {
    color: white;
    text-align: center;
}

label {
    color: white;
}

input {
    width: 100%;
    max-width: 100%;
    padding: 0.5rem;
    border: 1px solid white;
    border-radius: 3px;
    background-color: black;
    color: white;
    margin-bottom: 1rem;
    box-sizing: border-box;
}

button {
    background-color: green;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    cursor: pointer;
    border-radius: 3px;
    margin-top: 1rem;
    font-family: 'Montserrat', Arial, sans-serif;
    font-size: 1rem;
    width: 100%;
    max-width: 300px;
    margin: 0.5rem auto;
    display: block;
}

button:hover {
    background-color: #45a049;
}

p {
    font-weight: bold;
    text-align: center;
}

.form-group {
    margin-bottom: 1rem;
}

#results {
    margin-top: 1rem;
}

.table-container {
    overflow-x: auto;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1rem;
}

th, td {
    border: 1px solid white;
    padding: 0.5rem;
    text-align: center;
    vertical-align: middle;
}

th {
    background-color: green;
    color: white;
}

td {
    background-color: black;
    color: white;
}

.button-container {
    text-align: center;
}

.symbol-container {
    text-align: center;
    margin-top: 1rem;
}

.learn-more-container {
    text-align: center;
    margin-top: 1rem;
}

.learn-more-container p {
    color: white;
    font-size: 1rem;
    margin: 0.5rem 0;
}

.learn-more-link {
    color: white;
    background-color: green;
    font-size: 0.9rem;
    text-decoration: none;
    font-weight: bold;
    padding: 0.4rem 0.8rem;
    border: 1px solid green;
    border-radius: 3px;
    display: inline-block;
    margin: 0.5rem auto;
    width: 100%;
    max-width: 200px;
    text-align: center;
}

.learn-more-link:hover {
    background-color: #45a049;
}

.youtube-link {
    background-color: red;
    border-color: red;
}

.youtube-link:hover {
    background-color: #cc0000;
}

/* Updated Result Colors */
.result-good {
    font-weight: bold;
    font-size: 1.2em;
    color: green;
}

.result-decent {
    font-weight: bold;
    font-size: 1.2em;
    color: yellow;
}

.result-bad {
    font-weight: bold;
    font-size: 1.2em;
    color: red;
}

.result-large {
    font-weight: bold;
    font-size: 1.2em;
    color: green;
}

.result-mid {
    font-weight: bold;
    font-size: 1.2em;
    color: yellow;
}

.result-small {
    font-weight: bold;
    font-size: 1.2em;
    color: red;
}

/* Updated Summary Section */
.summary-section {
    display: none;
    padding: 1rem;
    border-radius: 5px;
    margin-top: 1rem;
}

.summary-section.undervalued {
    background-color: rgba(0, 128, 0, 0.2);
    border: 2px solid green;
}

.summary-section.overvalued {
    background-color: rgba(255, 0, 0, 0.2);
    border: 2px solid red;
}

.summary-section.average {
    background-color: rgba(255, 255, 0, 0.2);
    border: 2px solid yellow;
}

.summary-section .confidence-rating,
.summary-section .real-value,
.summary-section .valuation {
    font-size: 1.2em;
    margin: 0.5rem 0;
}

@media (max-width: 600px) {
    .table-container {
        overflow-x: auto;
    }

    table {
        width: 100%;
    }

    th, td {
        width: auto;
    }

    input {
        width: 100%;
    }

    .button-container {
        text-align: center;
    }

    button {
        width: 100%;
        font-size: 1.2em;
    }

    .result-good, .result-decent, .result-bad, .result-large, .result-mid, .result-small {
        font-size: 1.2em;
    }

    .learn-more-link {
        font-size: 1rem;
        width: 100%;
        max-width: 200px;
        margin: 0.5rem auto;
    }
}
    </style>
</head>
<body>
    <header>
        <h1>Suggestion</h1>
    </header>
    <main>
        <section>
            <h2>Enter Details</h2>
            <div class="symbol-container">
                <label for="symbol">Enter Symbol:</label>
                <input type="text" id="symbol" placeholder="Enter Stock Symbol">
                <label for="currentPrice">Last Traded Price (LTP):</label>
                <input type="number" id="currentPrice" placeholder="Enter Current Price">
            </div>
        </section>
        <section>
            <h2>Enter Financial Metrics</h2>
            <form id="calculatorForm">
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Params</th>
                                <th>Value</th>
                                <th>Result</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Market Cap (in Crores)</td>
                                <td><input type="number" id="marketCap" placeholder="Enter Market Cap" onblur="updateMarketCapResult()"></td>
                                <td id="marketCapResult" class="result"></td>
                            </tr>
                            <tr>
                                <td>Stock P/E Ratio</td>
                                <td><input type="number" id="stockPeRatio" placeholder="Enter Stock P/E Ratio" required></td>
                                <td rowspan="2" id="peResult" class="result"></td>
                            </tr>
                            <tr>
                                <td>Industry P/E Ratio</td>
                                <td><input type="number" id="industryPeRatio" placeholder="Enter Industry P/E Ratio" required></td>
                            </tr>
                            <tr>
                                <td>PB Ratio</td>
                                <td><input type="number" id="pbRatio" placeholder="Enter PB Ratio" onblur="updatePbResult()"></td>
                                <td id="pbResult" class="result"></td>
                            </tr>
                            <tr>
                                <td>Debt to Equity Ratio</td>
                                <td><input type="number" id="deRatio" placeholder="Enter Debt to Equity Ratio" onblur="updateDeResult()"></td>
                                <td id="deResult" class="result"></td>
                            </tr>
                            <tr>
                                <td>PEG Ratio</td>
                                <td><input type="number" id="pegRatio" placeholder="Enter PEG Ratio" onblur="updatePegResult()"></td>
                                <td id="pegResult" class="result"></td>
                            </tr>
                            <tr>
                                <td>ROE (%)</td>
                                <td><input type="number" id="roe" placeholder="Enter ROE" onblur="updateRoeResult()"></td>
                                <td id="roeResult" class="result"></td>
                            </tr>
                            <tr>
                                <td>ROCE (%)</td>
                                <td><input type="number" id="roce" placeholder="Enter ROCE" onblur="updateRoceResult()"></td>
                                <td id="roceResult" class="result"></td>
                            </tr>
                            <tr>
                                <td>Net Cash Flow</td>
                                <td><input type="number" id="netCashFlow" placeholder="Enter Net Cash Flow" onblur="updateNetCashFlowResult()"></td>
                                <td id="netCashFlowResult" class="result"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="button-container">
                    <button type="button" onclick="calculateSummary()">Analyse Now</button>
                    <button type="button" onclick="clearForm()">Clear All</button>
                </div>
            </form>
        </section>
        <section id="summarySection" class="summary-section">
            <h2>Summary</h2>
            <div id="summaryResult"></div>
        </section>
        
    </main>
    <footer>
    </footer>
    <script>
      function getResultTextAndClass(value, thresholds, labels) {
    if (value >= thresholds[1]) {
        return { text: labels[0], className: 'result-good', score: 3 };
    } else if (value >= thresholds[0] && value < thresholds[1]) {
        return { text: labels[1], className: 'result-decent', score: 1 };
    } else {
        return { text: labels[2], className: 'result-bad', score: 0 };
    }
}

function updateMarketCapResult() {
    const marketCap = parseFloat(document.getElementById('marketCap').value);
    if (!isNaN(marketCap)) {
        let text, className;
        if (marketCap > 100000) {
            text = 'LARGE';
            className = 'result-large';
        } else if (marketCap >= 20000 && marketCap <= 100000) {
            text = 'MID';
            className = 'result-mid';
        } else {
            text = 'SMALL';
            className = 'result-small';
        }
        document.getElementById('marketCapResult').textContent = text;
        document.getElementById('marketCapResult').className = className;
        document.getElementById('marketCapResult').dataset.score = (text === 'LARGE' ? 3 : text === 'MID' ? 2 : 1);
    }
}

function updatePeResult() {
    const stockPeRatio = parseFloat(document.getElementById('stockPeRatio').value);
    const industryPeRatio = parseFloat(document.getElementById('industryPeRatio').value);
    if (!isNaN(stockPeRatio) && !isNaN(industryPeRatio)) {
        let text, className;
        if (stockPeRatio < industryPeRatio) {
            text = 'GOOD';
            className = 'result-good';
        } else if (stockPeRatio > 2 * industryPeRatio) {
            text = 'BAD';
            className = 'result-bad';
        } else {
            text = 'DECENT';
            className = 'result-decent';
        }
        document.getElementById('peResult').textContent = text;
        document.getElementById('peResult').className = className;
        document.getElementById('peResult').dataset.score = (text === 'GOOD' ? 3 : text === 'DECENT' ? 1 : 0);
    }
}

function updatePbResult() {
    const pbRatio = parseFloat(document.getElementById('pbRatio').value);
    if (!isNaN(pbRatio)) {
        let text, className;
        if (pbRatio < 2) {
            text = 'GOOD';
            className = 'result-good';
        } else if (pbRatio >= 2 && pbRatio <= 5) {
            text = 'DECENT';
            className = 'result-decent';
        } else {
            text = 'BAD';
            className = 'result-bad';
        }
        document.getElementById('pbResult').textContent = text;
        document.getElementById('pbResult').className = className;
        document.getElementById('pbResult').dataset.score = (text === 'GOOD' ? 3 : text === 'DECENT' ? 1 : 0);
    }
}

function updateDeResult() {
    const deRatio = parseFloat(document.getElementById('deRatio').value);
    if (!isNaN(deRatio)) {
        let text, className;
        if (deRatio < 1) {
            text = 'GOOD';
            className = 'result-good';
        } else if (deRatio >= 1 && deRatio < 2) {
            text = 'DECENT';
            className = 'result-decent';
        } else {
            text = 'BAD';
            className = 'result-bad';
        }
        document.getElementById('deResult').textContent = text;
        document.getElementById('deResult').className = className;
        document.getElementById('deResult').dataset.score = (text === 'GOOD' ? 3 : text === 'DECENT' ? 1 : 0);
    }
}

function updatePegResult() {
    const pegRatio = parseFloat(document.getElementById('pegRatio').value);
    if (!isNaN(pegRatio)) {
        let text, className;
        if (pegRatio < 1) {
            text = 'GOOD';
            className = 'result-good';
        } else if (pegRatio >= 1 && pegRatio <= 2) {
            text = 'DECENT';
            className = 'result-decent';
        } else {
            text = 'BAD';
            className = 'result-bad';
        }
        document.getElementById('pegResult').textContent = text;
        document.getElementById('pegResult').className = className;
        document.getElementById('pegResult').dataset.score = (text === 'GOOD' ? 3 : text === 'DECENT' ? 1 : 0);
    }
}

function updateRoeResult() {
    const roe = parseFloat(document.getElementById('roe').value);
    if (!isNaN(roe)) {
        let text, className;
        if (roe > 20) {
            text = 'GOOD';
            className = 'result-good';
        } else if (roe >= 10 && roe <= 20) {
            text = 'DECENT';
            className = 'result-decent';
        } else {
            text = 'BAD';
            className = 'result-bad';
        }
        document.getElementById('roeResult').textContent = text;
        document.getElementById('roeResult').className = className;
        document.getElementById('roeResult').dataset.score = (text === 'GOOD' ? 3 : text === 'DECENT' ? 1 : 0);
    }
}

function updateRoceResult() {
    const roce = parseFloat(document.getElementById('roce').value);
    if (!isNaN(roce)) {
        let text, className;
        if (roce > 20) {
            text = 'GOOD';
            className = 'result-good';
        } else if (roce >= 10 && roce <= 20) {
            text = 'DECENT';
            className = 'result-decent';
        } else {
            text = 'BAD';
            className = 'result-bad';
        }
        document.getElementById('roceResult').textContent = text;
        document.getElementById('roceResult').className = className;
        document.getElementById('roceResult').dataset.score = (text === 'GOOD' ? 3 : text === 'DECENT' ? 1 : 0);
    }
}

function updateNetCashFlowResult() {
    const netCashFlow = parseFloat(document.getElementById('netCashFlow').value);
    if (!isNaN(netCashFlow)) {
        let text, className;
        if (netCashFlow > 0) {
            text = 'GOOD';
            className = 'result-good';
        } else if (netCashFlow === 0) {
            text = 'DECENT';
            className = 'result-decent';
        } else {
            text = 'BAD';
            className = 'result-bad';
        }
        document.getElementById('netCashFlowResult').textContent = text;
        document.getElementById('netCashFlowResult').className = className;
        document.getElementById('netCashFlowResult').dataset.score = (text === 'GOOD' ? 3 : text === 'DECENT' ? 1 : 0);
    }
}

function calculateSummary() {
    const scoreElements = [
        'peResult',
        'pbResult',
        'deResult',
        'pegResult',
        'roeResult',
        'roceResult',
        'netCashFlowResult',
        'marketCapResult'
    ];

    const scores = scoreElements.map(id => {
        const element = document.getElementById(id);
        return element && element.dataset.score ? parseInt(element.dataset.score) : NaN;
    });

    if (scores.includes(NaN)) {
        alert('Please enter all the required metrics to calculate the summary.');
        return;
    }

    const totalScore = scores.reduce((sum, score) => sum + score, 0);
    const confidenceRating = (totalScore / (scores.length * 3)) * 100;
    const stockSymbol = document.getElementById('symbol').value.trim().toUpperCase();
    const marketCapText = document.getElementById('marketCapResult').textContent;
    let briefSummary;

    if (confidenceRating >= 70) {
        briefSummary = `${stockSymbol} is looking strong with a ${confidenceRating.toFixed(2)}% confidence rating. A promising investment with a good balance across key metrics.`;
    } else if (confidenceRating >= 50) {
        briefSummary = `${stockSymbol} is showing moderate potential with a ${confidenceRating.toFixed(2)}% confidence rating. Growth is possible, but a cautious approach is advisable.`;
    } else {
        briefSummary = `${stockSymbol} is considered a risky investment with a ${confidenceRating.toFixed(2)}% confidence rating. It's important to be careful before proceeding.`;
    }

    const kannadaSummary = confidenceRating >= 70
        ? `${stockSymbol} ಒಂದು ${marketCapText}-ಕ್ಯಾಪ್ ಕಂಪನಿ ಆಗಿದೆ. Analysis ಪ್ರಕಾರ, ಈ stock strong ಕಾಣ್ತಾ ಇದೆ ${confidenceRating.toFixed(2)}% confidence rating. ಇದು ಒಳ್ಳೆ ಇನ್ವೆಸ್ಟ್ಮೆಂಟ್ ಆಗೋ ಚಾನ್ಸ್ ಇದೆ.`
        : confidenceRating >= 50
            ? `${stockSymbol} ಒಂದು ${marketCapText}-ಕ್ಯಾಪ್ ಕಂಪನಿ ಆಗಿದೆ. Analysis ಪ್ರಕಾರ, ಈ stock moderate potential ತೋರಿಸುತ್ತಿದೆ ${confidenceRating.toFixed(2)}% confidence rating. Growth ಆಗೋ ಚಾನ್ಸ್ ಇದೆ, ಆದ್ರೆ ಸ್ವಲ್ಪ careful ಆಗಿರೋದು ಬೆಸ್ಟ್.`
            : `${stockSymbol} ಒಂದು ${marketCapText}-ಕ್ಯಾಪ್ ಕಂಪನಿ ಆಗಿದೆ. Analysis ಪ್ರಕಾರ, ಈ stock risky ಇನ್ವೆಸ್ಟ್ಮೆಂಟ್ ಅಲ್ಲಿ ಬರುತ್ತೆ ${confidenceRating.toFixed(2)}% confidence rating. So ಇನ್ವೆಸ್ಟ್  ಮಾಡೋ ಮುನ್ನ ಸ್ವಲ್ಪ ಹುಷಾರಾಗಿರಿ.`;

    document.getElementById('summaryResult').innerHTML = `
        <h3>English Summary</h3>
        <p class="confidence-rating">${briefSummary}</p>
        <h3>Kannada Summary</h3>
        <p class="valuation">${kannadaSummary}</p>
    `;

    const summarySection = document.getElementById('summarySection');
    summarySection.className = 'summary-section';
    summarySection.style.display = 'block';
}

function clearForm() {
    document.getElementById('calculatorForm').reset();
    document.querySelectorAll('.result').forEach(result => {
        result.textContent = '';
        result.className = 'result';
        delete result.dataset.score;
    });
    document.getElementById('summaryResult').innerHTML = '';
    document.getElementById('summarySection').style.display = 'none';
    document.getElementById('summarySection').className = 'summary-section';
    
    // Clear Stock Symbol and Last Traded Price input fields
    document.getElementById('symbol').value = '';
    document.getElementById('currentPrice').value = '';

    // Clear all specific result elements
    const resultIds = [
        'marketCapResult', 'peResult', 'pbResult', 'deResult',
        'pegResult', 'roeResult', 'roceResult', 'netCashFlowResult'
    ];
    resultIds.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = '';
            element.className = 'result';
        }
    });
}

document.getElementById('stockPeRatio').addEventListener('blur', updatePeResult);
document.getElementById('industryPeRatio').addEventListener('blur', updatePeResult);
document.getElementById('pbRatio').addEventListener('blur', updatePbResult);
document.getElementById('deRatio').addEventListener('blur', updateDeResult);
document.getElementById('pegRatio').addEventListener('blur', updatePegResult);
document.getElementById('roe').addEventListener('blur', updateRoeResult);
document.getElementById('roce').addEventListener('blur', updateRoceResult);
document.getElementById('netCashFlow').addEventListener('blur', updateNetCashFlowResult);
document.getElementById('marketCap').addEventListener('blur', updateMarketCapResult);
document.getElementById('currentPrice').addEventListener('blur', calculateSummary);
    </script>
</body>
</html>
